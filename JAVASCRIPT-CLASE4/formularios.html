<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
      integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
      crossorigin="anonymous"
    />

    <script>
      const handlerNombre = (nombre) => {
        const element = document.getElementById(nombre);
        element.value == ""
          ? (element.style.border = `1px solid red`)
          : (element.style.border = `1px solid green`);
      };

      const send = () => {
        const obj = {
          nombre: document.getElementById("nombre").value,
          apellido: document.getElementById("apellido").value,
          email: document.getElementById("email").value,
        };

        localStorage.setItem(obj.email, JSON.stringify(obj));
      };
      const getLocalStorage = () => {
        const keysObject = Object.keys(localStorage);
        // KEYS
        keysObject.forEach((keys) => console.log(localStorage.getItem(keys)));
      };

      const start = () => {
        document.getElementById("nombre").addEventListener("blur", () => {
          handlerNombre("nombre");
        });
        document.getElementById("apellido").addEventListener("blur", () => {
          handlerNombre("apellido");
        });
        document.getElementById("email").addEventListener("blur", () => {
          handlerNombre("email");
        });
        document.getElementById("enviar").addEventListener("click", send);
        document
          .getElementById("getLocalStorage")
          .addEventListener("click", getLocalStorage);
      };
      window.onload = start;
    </script>
  </head>
  <body>
    <!-- EMMET-->
    <div class="container">
      <div class="row">
        <div class="col-6">
          <form action="">
            <div class="form-group">
              <input
                type="text"
                id="nombre"
                placeholder="nombre"
                class="form-control"
                autofocus
              />
            </div>
            <div class="form-group">
              <input
                type="text"
                id="apellido"
                placeholder="apellido"
                class="form-control"
              />
            </div>
            <div class="form-group">
              <input
                type="email"
                id="email"
                placeholder="email"
                class="form-control"
              />
            </div>
            <button type="button" class="btn btn-primary btn-block" id="enviar">
              Enviar
            </button>
          </form>
          <button type="button" id="getLocalStorage">Ver local storage</button>
        </div>
        <div class="col-6">
          <h2>Usuarios</h2>
          <span id="users-list"></div>
        </div>
      </div>
    </div>
  </body>
</html>
